
<%- include('header') %>
  <div id="admin-content">
      <div class="container">
          <div class="row">
              <div class="col-md-10">
                  <h1 class="admin-heading">All Posts</h1>
              </div>
              <div class="col-md-2">
                  <a class="add-new" href="/admin/add-post">add post</a>
              </div>
              <div class="col-md-12">
                  <table class="content-table">
                      <thead>
                          <th>S.No.</th>
                          <th>Title</th>
                          <th>Category</th>
                          <th>Date</th>
                          <th>Author</th>
                          <th>status</th>
                          <th>Edit</th>
                          <th>Delete</th>
                      </thead>
                      <tbody>

                            <% posts.forEach(function(post, index){ %>
                                <tr>
                                    <td class='id'><%= offset + index + 1 %></td>
                                    <td><%= post.title %></td>
                                    <td><%= post.category.name %></td>
                                     
                                    <td><%= post.formattedDate %></td>
                                    <td><%= post.user?.username %></td>
                                    <td>
                                      <img class="w-75" src="<%= post.status ? '/images/green_icon.png': '/images/red_icon1.png' %>" alt="">
                                      </td>
                                      <!-- <img src="images/green_icon.png" alt=""> -->
                                    <td class='edit'><a href='/admin/update-post/<%= post._id %>'><i class='fa fa-edit'></i></a></td>
                                    <td class='delete'><a href='/admin/delete-post/<%= post._id %>'><i class='fa fa-trash-o'></i></a></td>
                                </tr>
                            <% }) %>                        
                          
                      </tbody>
                  </table>
                  
                  <ul class='pagination admin-pagination'>
                    <% if (currentPage > 1) { %>
                      <li>
                        <a href="/admin/post?page=<%= currentPage - 1 %>">Previous</a>
                      </li>
                    <% } %>
        
                    <% if (totalPages > 1) { %>
                      <% for (let i=1; i <= totalPages; i++) { %>
                        <li class="<%= currentPage === i ? 'active' : '' %>">
                          <a href="/admin/post?page=<%= i %>">
                            <%= i %>
                          </a>
                        </li>
                      <% } %>
                    <% }  %>
        
                    <% if (currentPage < totalPages) { %>
                      <li><a href="/admin/post?page=<%= currentPage + 1 %>">Next</a></li>
                    <% } %>
                </ul>
              </div>
          </div>
      </div>
  </div>
  <%- include('footer') %>

